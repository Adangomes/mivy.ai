<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sushi Delivery</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>

    <header>Sushi Delivery</header>

    <div class="container">
        <div id="combo-list"></div>
    </div>

    <script>
        const combos = [{
            id: 1,
            name: "Combo Sushi Tradicional",
            description: "12 peças de sushi variados",
            price: 45.00,
            imageUrl: "https://images.unsplash.com/photo-1553621042-f6e147245754?auto=format&fit=crop&w=200&q=80"
        }, {
            id: 2,
            name: "Combo Sushi Especial",
            description: "16 peças com sashimi e uramaki",
            price: 65.00,
            imageUrl: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&w=200&q=80"
        }, {
            id: 3,
            name: "Combo Família",
            description: "30 peças para 4 pessoas",
            price: 120.00,
            imageUrl: "https://images.unsplash.com/photo-1553621042-f6e147245754?auto=format&fit=crop&w=200&q=80"
        }];

        const comboList = document.getElementById('combo-list');

        let carrinho = [];

        // Mostrar combos na tela
        combos.forEach(combo => {
            const div = document.createElement('div');
            div.className = 'combo';
            div.innerHTML = `
      <img src="${combo.imageUrl}" alt="${combo.name}" />
      <div class="combo-info">
        <div class="combo-name">${combo.name}</div>
        <div class="combo-desc">${combo.description}</div>
        <div class="combo-price">R$ ${combo.price.toFixed(2)}</div>
      </div>
      <button data-id="${combo.id}">Escolher</button>
    `;
            comboList.appendChild(div);
        });

        const verCarrinhoBtn = document.createElement('button');
        verCarrinhoBtn.id = 'ver-carrinho-btn';
        verCarrinhoBtn.style.display = 'none';
        verCarrinhoBtn.textContent = 'Ver Carrinho (0)';
        document.querySelector('.container').appendChild(verCarrinhoBtn);

        const modal = document.createElement('div');
        modal.id = 'carrinho-modal';
        modal.innerHTML = `
    <div id="carrinho-content">
      <h2>Carrinho</h2>
      <div id="carrinho-itens"></div>
      <div><strong>Total: R$ <span id="carrinho-total">0.00</span></strong></div>
      <button id="fechar-carrinho">Fechar</button>
    </div>
  `;
        document.body.appendChild(modal);

        function atualizarBotaoCarrinho() {
            const totalItens = carrinho.reduce((acc, item) => acc + item.quantidade, 0);
            if (totalItens > 0) {
                verCarrinhoBtn.style.display = 'block';
                verCarrinhoBtn.textContent = `Ver Carrinho (${totalItens})`;
            } else {
                verCarrinhoBtn.style.display = 'none';
            }
        }

        function atualizarModalCarrinho() {
            const carrinhoItens = document.getElementById('carrinho-itens');
            carrinhoItens.innerHTML = '';

            carrinho.forEach(item => {
                const div = document.createElement('div');
                div.className = 'carrinho-item';
                div.innerHTML = `
        <span>${item.nome} x${item.quantidade}</span>
        <span>R$ ${(item.preco * item.quantidade).toFixed(2)}</span>
        <button data-id="${item.id}">X</button>
      `;
                carrinhoItens.appendChild(div);

                div.querySelector('button').addEventListener('click', () => {
                    removerDoCarrinho(item.id);
                });
            });

            const total = carrinho.reduce((acc, item) => acc + item.preco * item.quantidade, 0);
            document.getElementById('carrinho-total').textContent = total.toFixed(2);
        }

        function adicionarAoCarrinho(id) {
            const combo = combos.find(c => c.id === id);
            if (!combo) return;

            const itemNoCarrinho = carrinho.find(i => i.id === id);

            if (itemNoCarrinho) {
                itemNoCarrinho.quantidade++;
            } else {
                carrinho.push({
                    id: combo.id,
                    nome: combo.name,
                    preco: combo.price,
                    quantidade: 1
                });
            }
            atualizarBotaoCarrinho();
        }

        function removerDoCarrinho(id) {
            carrinho = carrinho.filter(item => item.id !== id);
            atualizarModalCarrinho();
            atualizarBotaoCarrinho();
        }

        comboList.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', () => {
                const id = parseInt(button.getAttribute('data-id'));
                adicionarAoCarrinho(id);
            });
        });

        verCarrinhoBtn.addEventListener('click', () => {
            atualizarModalCarrinho();
            modal.classList.add('active');
        });

        document.body.addEventListener('click', e => {
            if (e.target.id === 'fechar-carrinho') {
                modal.classList.remove('active');
            }
        });
    </script>

    <!-- Modal para escolher adicionais (placeholder) -->
    <div id="modal-adicionais">
        <div class="modal-content">
            <h3 id="modal-combo-name">Combo</h3>
            <p id="modal-combo-desc"></p>

            <div id="adicionais-list"></div>

            <div class="modal-footer">
                <div>Total: R$ <span id="modal-total">0.00</span></div>
                <button id="modal-cancelar">Cancelar</button>
                <button id="modal-adicionar">Adicionar ao Carrinho</button>
            </div>
        </div>
    </div>

</body>

</html>